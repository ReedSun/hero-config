title: 学习笔记_单元测试
date: 2016/9/29 19:21:05
tags: Python
---

- 单元测试是用来对一个模块、一个函数或者一个类来进行正确性检验的测试工作。

- 把若干个可以覆盖所有情况的测试用例放到一个测试模块里，就是一个完整的单元测试。

- 如果单元测试通过，说明我们测试的这个函数能够正常工作。如果单元测试不通过，要么函数有bug，要么测试条件输入不正确，总之，需要修复使单元测试能够通过。

- 为了编写单元测试，我们需要引入Python自带的`unittest`模块。以`test`开头的方法就是测试方法，不以`test`开头的方法不被认为是测试方法，测试的时候不会被执行。

- 对每一类测试都需要编写一个`test_xxx()`方法。由于`unittest.TestCase`提供了很多内置的条件判断，我们只需要调用这些方法就可以断言输出是否是我们所期望的。最常用的断言就是`assertEqual()`。

- 另一种重要的断言就是期待抛出指定类型的Error，用的是`assertRaises(xxxError`)。

##运行单元测试

- 我们有两种方法可以运行单元测试。
  - 在测试代码的最后的最后加上两行代码。

  ```
  if __name__ == '__main__':
    unittest.main()
  ```
  - 另一种方法是在命令行通过参数`-m unittest`直接运行单元测试。这是推荐的做法，因为这样可以一次批量运行很多单元测试。
  
##setUp与tearDown

- 可以在单元测试中编写两个特殊的`setUp()`和`tearDown()`方法。这两个方法会分别在每调用一个测试方法的前后分别被执行。

- `setUp()`和`tearDown()`方法的作用是在每个测试方法的之前调用`setUp()`，在每个测试方法之后调用`tearDown`。